#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "equipement.h"
#include <QMessageBox>
#include <QtCharts>
#include <QChartView>
#include <QLineSeries>
#include "QrCode.hpp"
#include <QtNetwork/QAbstractSocket>
#include <QtNetwork/QSslSocket>
#include"smtp.h"

#include <QMessageBox>
#include<QIntValidator>
#include <QApplication>
#include<QSound>
#include<QDebug>
#include<QMediaPlayer>
#include <QPrinter>
#include <QTextStream>
#include <QTextDocument>
#include <QDataStream>
#include <QPrintDialog>
#include <QSqlQuery>
#include<QComboBox>
#include<QSaveFile>
#include<QBuffer>
#include<QFileDialog>
#include<QFile>
#include <QMessageBox>
#include <QDebug>
#include <QIntValidator>
#include <QSqlQueryModel>
#include <QtCharts>
#include <QChartView>
#include <QLineSeries>
#include<QDesktopServices>
#include<QUrl>
#include <QTextStream>
#include <QTextDocument>
#include <QtPrintSupport/QPrintDialog>
#include <QtPrintSupport/QPrinter>
#include <QtWidgets>
#include<QFileDialog>
#include<QGraphicsView>
#include<QPdfWriter>
#include<QSqlQuery>
#include<QSystemTrayIcon>
#include <QtNetwork/QAbstractSocket>
#include <QtNetwork/QSslSocket>
#include<QUrlQuery>
#include<QJsonDocument>
#include<QJsonObject>
#include<QJsonArray>
#include <QDate>
#include <QTime>
#include<QSqlTableModel>
#include<QItemSelectionModel>
#include<QTableWidgetItem>
#include <QDesktopWidget>
#include <QCoreApplication>
#include <QDateEdit>
#include <QComboBox>
#include"smtp.h"
#include <QPixmap>
#include <QMediaPlayer>
#include <QTabWidget>
#include <QObject>
#include <QDialog>
#include <QValidator>
#include <QPropertyAnimation>
#include <QEasingCurve>
#include <QSequentialAnimationGroup>
#include <QState>
#include <QStateMachine>
#include <QSignalTransition>
#include <QPainter>
#include<QString>
#include<QStatusBar>
#include <QSound>
#include<QTimer>
#include<QDateTime>
 #include <QApplication>
#include<QMessageBox>
#include <QApplication>
#include<QIntValidator>
//#include<QIntValidator>
#include <QtWidgets>
#include <QtCore>
#include <QtGui>
#include <QtSql>
#include <QPdfWriter>
#include <QPainter>
#include <QFont>
#include <QFileDialog>
#include <QMessageBox>
#include <QDesktopServices>
#include<QMessageBox>
#include<QComboBox>
#include<QtCharts>
#include<QtCharts>
#include <QPrinter>
#include <QPainter>
#include <QPrintDialog>
#include <QTextDocument>
#include <QDialog>
#include <QSqlQuery>
#include <QSqlQueryModel>
#include <QSortFilterProxyModel>
#include <QTextTableFormat>
#include <QStandardItemModel>
#include <QSortFilterProxyModel>
#include <QTextTableFormat>
#include <QStandardItemModel>
#include <QDialog>
#include <QFileDialog>
//#include <QMediaPlayer>
//#include <QVideoWidget>
#include <QDialog>
#include <QDesktopWidget>
#include <QSettings>
#include <QPrinter>
#include <QTextStream>
#include <QFile>
#include <QDataStream>
#include <QTextDocument>
#include<QRegExpValidator>
#include "mainwindow.h"
#include <QMessageBox>
#include<QIntValidator>
#include <QApplication>
#include<QSound>
#include<QDebug>
#include<QMediaPlayer>
#include <QPrinter>
#include <QTextStream>
#include <QTextDocument>
#include <QDataStream>
#include <QPrintDialog>
#include <QSqlQuery>
#include<QComboBox>
#include<QSaveFile>
#include<QBuffer>
#include<QFileDialog>
#include<QFile>
#include <QMessageBox>
#include <QDebug>
#include <QIntValidator>
#include <QSqlQueryModel>
#include <QtCharts>
#include <QChartView>
#include <QLineSeries>
#include<QDesktopServices>
#include<QUrl>
#include <QTextStream>
#include <QTextDocument>
#include <QtPrintSupport/QPrintDialog>
#include <QtPrintSupport/QPrinter>
#include <QtWidgets>
#include<QFileDialog>
#include<QGraphicsView>
#include<QPdfWriter>
#include<QSqlQuery>
#include<QSystemTrayIcon>
#include <QtNetwork/QAbstractSocket>
#include <QtNetwork/QSslSocket>
#include<QUrlQuery>
#include<QJsonDocument>
#include<QJsonObject>
#include<QJsonArray>
#include <QDate>
#include <QTime>
#include<QSqlTableModel>
#include<QItemSelectionModel>
#include<QTableWidgetItem>
#include <QDesktopWidget>
#include <QCoreApplication>
#include <QDateEdit>
#include <QComboBox>
#include"smtp.h"
#include <QPixmap>
#include <QMediaPlayer>
#include <QTabWidget>
#include <QObject>
#include <QDialog>
#include <QValidator>
#include <QPropertyAnimation>
#include <QEasingCurve>
#include <QSequentialAnimationGroup>
#include <QState>
#include <QStateMachine>
#include <QSignalTransition>
#include <QPainter>
#include<QString>
#include<QStatusBar>
#include <QSound>
#include<QTimer>
#include<QDateTime>
 #include <QApplication>
#include <QSqlQuery>
#include <QSqlError>
#include <QDebug>
#include <QSqlQuery>


#include <QMessageBox>
#include<QIntValidator>
#include <QApplication>
#include<QSound>
#include<QDebug>
#include<QMediaPlayer>
#include <QPrinter>
#include <QTextStream>
#include <QTextDocument>
#include <QDataStream>
#include <QPrintDialog>
#include <QSqlQuery>
#include<QComboBox>
#include<QSaveFile>
#include<QBuffer>
#include<QFileDialog>
#include<QFile>
#include <QMessageBox>
#include <QDebug>
#include <QIntValidator>
#include <QSqlQueryModel>
#include <QtCharts>
#include <QChartView>
#include <QLineSeries>
#include<QDesktopServices>
#include<QUrl>
#include <QTextStream>
#include <QTextDocument>
#include <QtPrintSupport/QPrintDialog>
#include <QtPrintSupport/QPrinter>
#include <QtWidgets>
#include<QFileDialog>
#include "mainwindow.h"
#include<QGraphicsView>
#include<QPdfWriter>
#include<QSqlQuery>
#include<QSystemTrayIcon>
#include <QtNetwork/QAbstractSocket>
#include <QtNetwork/QSslSocket>
#include<QUrlQuery>
#include<QJsonDocument>
#include<QJsonObject>
#include<QJsonArray>
#include <QDate>
#include <QTime>
#include<QSqlTableModel>
#include<QItemSelectionModel>
#include<QTableWidgetItem>
#include <QDesktopWidget>
#include <QCoreApplication>
#include <QDateEdit>
#include <QComboBox>
#include"smtp.h"
#include <QPixmap>
#include <QMediaPlayer>
#include <QTabWidget>
#include <QObject>
#include <QDialog>
#include <QValidator>
#include <QPropertyAnimation>
#include <QEasingCurve>
#include <QSequentialAnimationGroup>
#include <QState>
#include <QStateMachine>
#include <QSignalTransition>
#include <QPainter>
#include<QString>
#include<QStatusBar>
#include <QSound>
#include<QTimer>
#include<QDateTime>
 #include <QApplication>
#include <QSqlQuery>
#include <QSqlError>
#include <QDebug>
#include <QSqlQuery>
#include"smtp.h"

#include<QSqlQuery>
#include<QSystemTrayIcon>
#include <QtNetwork/QAbstractSocket>
#include <QtNetwork/QSslSocket>
#include<QUrlQuery>
#include<QJsonDocument>
#include<QJsonObject>
#include<QJsonArray>
#include "mainwindow.h"
#include <QMessageBox>
#include<QIntValidator>
#include <QApplication>
#include<QSound>
#include<QDebug>
#include<QMediaPlayer>
#include <QPrinter>
#include <QTextStream>
#include <QTextDocument>
#include <QDataStream>
#include <QPrintDialog>
#include <QSqlQuery>
#include<QComboBox>
#include<QSaveFile>
#include<QBuffer>
#include<QFileDialog>
#include<QFile>
#include <QMessageBox>
#include <QDebug>
#include <QIntValidator>
#include <QSqlQueryModel>
#include <QtCharts>
#include <QChartView>
#include <QLineSeries>
#include<QDesktopServices>
#include<QUrl>
#include <QTextStream>
#include <QTextDocument>
#include <QtPrintSupport/QPrintDialog>
#include <QtPrintSupport/QPrinter>
#include <QtWidgets>
#include<QFileDialog>
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include<QGraphicsView>
#include<QPdfWriter>
#include<QSqlQuery>
#include<QSystemTrayIcon>
#include <QtNetwork/QAbstractSocket>
#include <QtNetwork/QSslSocket>
#include<QUrlQuery>
#include<QJsonDocument>
#include<QJsonObject>
#include<QJsonArray>
#include <QDate>
#include <QTime>
#include<QSqlTableModel>
#include<QItemSelectionModel>
#include<QTableWidgetItem>
#include <QDesktopWidget>
#include <QCoreApplication>
#include <QDateEdit>
#include <QComboBox>
#include"smtp.h"
#include <QPixmap>
#include <QMediaPlayer>
#include <QTabWidget>
#include <QObject>
#include <QDialog>
#include <QValidator>
#include <QPropertyAnimation>
#include <QEasingCurve>
#include <QSequentialAnimationGroup>
#include <QState>
#include <QStateMachine>
#include <QSignalTransition>
#include <QPainter>
#include<QString>
#include<QStatusBar>
#include <QSound>
#include<QTimer>
#include<QDateTime>
 #include <QApplication>
using namespace qrcodegen;

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
    , ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    ui->tab_equipement->setModel(E.afficher());//refresh


}

MainWindow::~MainWindow()
{
    delete ui;
}
void MainWindow::on_pb_ajouter_clicked()
{
    // Réinitialisez les étiquettes d'erreur à vide
    ui->lblErreurId->setText("");
    ui->lblErreurType->setText("");
    ui->lblErreurEtat->setText("");
    ui->lblErreurPrix->setText("");
    ui->lblErreurNiveauremplissage->setText("");
    ui->lblErreurDate_acquisation->setText("");  // Correction du nom de la variable
    ui->lblErreuridZ->setText("");  // Correction du nom de la variable

    // Récupérez les valeurs d'entrée
    QString id_equipement = ui->le_idequipement->text();
    QString type = ui->type->currentText();
    QString etat = ui->etat->currentText();
    int prix = ui->prix->text().toInt();
    float niveau_remplissage = ui->niveauremplissage->text().toFloat();
    QDate date_acquisition = ui->date->date();  // Correction du nom de la variable

    QString idZ = ui->idZone->text();

    // Validez les champs d'entrée
    bool isValid = true;

    if (id_equipement.isEmpty()) {
        ui->lblErreurId->setText("<font color='red'>ID Equipement ne peut pas être vide!!!!</font>");
        isValid = false;
    }

    // Validation pour le titre (exemplaire, assurez-vous qu'il n'est pas vide)
    if (type.isEmpty()) {
        ui->lblErreurType->setText("<font color='red'>Choisir un Type!!!</font>");
        isValid = false;
    }

    if (etat.isEmpty()) {
        ui->lblErreurEtat->setText("<font color='red'>Choisir un etat!!!</font>");
        isValid = false;
    }
    if (prix < 0) {
        ui->lblErreurPrix->setText("<font color='red'>Prix doit être positif !!!</font>");
        isValid = false;
    }
    if (niveau_remplissage < 0) {
        ui->lblErreurNiveauremplissage->setText("<font color='red'>Niveau remplissage doit être positif!!!</font>");
        isValid = false;
    }

    // Ajouter une vérification de l'existence de l'ID dans la base de données
    QSqlQuery checkQuery;
    checkQuery.prepare("SELECT id_equipement from equipement  WHERE id_equipement = :id_equipement");
    checkQuery.bindValue(":id_equipement", id_equipement);
    if (checkQuery.exec() && checkQuery.next()) {
        ui->lblErreurId->setText("<font color='red'>ID Equipement existe déjà!!!!</font>");
        isValid = false;
    }

    if (isValid) {
        // Si l'entrée est valide et que l'ID n'existe pas, procédez à l'ajout de l'activité
        Equipement E(id_equipement, type, etat, prix, niveau_remplissage, date_acquisition, idZ);  // Correction de la création de l'objet Equipement

        QSqlQuery query;
        bool test = E.ajouter();
        if (test) {
            ui->tab_equipement->setModel(E.afficher());  // Refresh
ui->comboSupp->setModel(E.afficher());
ui->ComboModif->setModel(E.afficher());

            QMessageBox::information(nullptr, QObject::tr("Ajout Equipement"),
                QObject::tr("Equipement ajouté avec succès.\n"
                            "Cliquez sur Annuler pour quitter."), QMessageBox::Cancel);
        } else {
            QMessageBox::critical(nullptr, QObject::tr("Ajout Equipement"),
                QObject::tr("Erreur lors de l'ajout de l'Equipement.\n"
                            "Cliquez sur Annuler pour quitter."), QMessageBox::Cancel);
        }
    } else {
        // Gérez l'erreur d'entrée invalide ou d'ID existant
    }
}

void MainWindow::on_pb_afficher_clicked()
{
    ui->tab_equipement->setModel(E.afficher());//refresh



}

void MainWindow::on_pb_supprimer_2_clicked()
{
    QString id_equipement=ui->comboSupp->currentText();

    bool test=E.supprimer(id_equipement);
    if(test)
    {
        ui->tab_equipement->setModel(E.afficher());//refresh

        ui->comboSupp->setModel(E.afficher());
        QMessageBox::information(nullptr, QObject::tr("Supprimer Equipement"),
                    QObject::tr("Equipement supprimé.\n"
                                "Click Cancel to exit."), QMessageBox::Cancel);


        ui->comboSupp->setModel(E.afficher());
        ui->ComboModif->setModel(E.afficher());
    }
    else
        QMessageBox::critical(nullptr, QObject::tr("Supprimer Equipement"),
                    QObject::tr("Erreur !.\n"
                                "Click Cancel to exit."), QMessageBox::Cancel);
}
void MainWindow::on_modifier_2_clicked()
{
    // Récupérez les valeurs d'entrée
    QString id_equipement = ui->ComboModif->currentText();
    QString type = ui->type2->currentText();
    QString etat = ui->etat2->currentText();
    int prix = ui->prix2->text().toInt();
    float niveau_remplissage = ui->niveauremplissage2->text().toFloat();
    QDate date_acquisation = ui->date2->date();
    QString idZ = ui->idZone2->text();

    // Créez un objet Equipement en utilisant le constructeur
    Equipement E(id_equipement, type, etat, prix, niveau_remplissage, date_acquisation, idZ);

    QSqlQuery query;

    bool test = E.modifier();
    if (test)
    {
        ui->tab_equipement->setModel(E.afficher());  // Refresh

        QMessageBox::information(nullptr, QObject::tr("Modifier Equipement"),
            QObject::tr("Equipement modifié avec succès.\n"
                        "Cliquez sur Annuler pour quitter."), QMessageBox::Cancel);

        // Mettez à jour les modèles pour les combobox
        ui->comboSupp->setModel(E.afficher());
        ui->ComboModif->setModel(E.afficher());
    }
    else
    {
        QMessageBox::critical(nullptr, QObject::tr("Modifier Equipement"),
            QObject::tr("Erreur lors de la modification de l'Equipement.\n"
                        "Cliquez sur Annuler pour quitter."), QMessageBox::Cancel);
    }

    ui->ComboModif->clear();  // Effacez le contenu du combobox
}

void MainWindow::on_pb_afficher_3_clicked()
{
    ui->tab_equipement->setModel(E.afficher());//refresh


}

void MainWindow::on_pb_afficher_4_clicked()
{
    ui->tab_equipement->setModel(E.afficher());//refresh
}

void MainWindow::on_valider1_2_clicked()
{
    {
        QString id_equipement=ui->ComboModif->currentText();
                  QSqlQuery query;
                  query.prepare("select * from equipement where id_equipement='"+id_equipement+"'");
                  if (query.exec())
                  {
                   while (query.next())
                   {


                       ui->type2->setCurrentText(query.value(1).toString());
                       ui->etat2->setCurrentText(query.value(2).toString());
                       ui->prix2->setText(query.value(3).toString());
                       ui->niveauremplissage2->setText(query.value(4).toString());

                       ui->date2->setDate(query.value(5).toDate());
                       ui->idZone2->setText(query.value(6).toString());






                   }
                  }


}}

void MainWindow::on_reset_clicked()
{
    ui->ComboModif->clear();

        ui->type2->clear();
        ui->etat2->clear();

        ui->prix2->clear();
        ui->niveauremplissage2->clear();
        ui->date2->clear();
        ui->idZone2->clear();
}


void MainWindow::on_lineEdit_recherche_textChanged(const QString &arg1) //recherche dynamique
{
        QString NOM=ui->lineEdit_recherche->text();
       ui->tab_equipement->setModel(E.rechercher(NOM));
      ui->tab_equipement->clearSelection();
}
void MainWindow::on_comboBox_tri_activated(const QString &arg1)
{


    QString NOM=ui->comboBox_tri->currentText();
    ui->tab_equipement->setModel(E.trier(NOM));
  ui->tab_equipement->clearSelection();
}

void MainWindow::on_statistique_clicked()
{
    QSqlQueryModel * model= new QSqlQueryModel();
    model->setQuery("select * from Equipement where type='Presse'");
     float dispo=model->rowCount();

           model->setQuery("select * from Equipement where type='Broyeur'");
           float dispo1=model->rowCount();




           model->setQuery("select * from Equipement where type='Concasseur'");
           float dispo2=model->rowCount();

           float total=dispo1+dispo+dispo2;
               QString a=QString("Type Broyeur" +QString::number((dispo1*100)/total,'f',2)+"%" );
               QString b=QString("Type Presse"+QString::number((dispo*100)/total,'f',2)+"%" );
               QString c=QString("Type Concasseur"+QString::number((dispo2*100)/total,'f',2)+"%" );

               QPieSeries *series = new QPieSeries();
               series->append(a,dispo1);
               series->append(b,dispo);
               series->append(c,dispo2);

           if (dispo1!=0)
           {QPieSlice *slice = series->slices().at(0);
               slice->setLabelVisible();
               slice->setPen(QPen());}
           if ( dispo!=0)
           {
               QPieSlice *slice1 = series->slices().at(1);
               slice1->setLabelVisible();
           }
           if ( dispo2!=0)
           {
               QPieSlice *slice2 = series->slices().at(2);
               slice2->setLabelVisible();
           }

           QChart *chart = new QChart();


           chart->addSeries(series);
           chart->setTitle("statistique par type      "+ QString::number(total));



           QChartView *chartView = new QChartView(chart);
           chartView->setRenderHint(QPainter::Antialiasing);
           chartView->resize(1000,500);
           chartView->show();
}

void MainWindow::on_PDF_clicked()
{
    QPdfWriter pdf("C:/Users/GENERAL/Desktop/Gestion_equipements/Gestion_equipements/list_des_equipement.pdf");

            QPainter painter(&pdf);


                   int i = 4000;
                   painter.setPen(Qt::black);
                   painter.setFont(QFont("Book Script",20));
                   painter.drawText(2500, 1400, "LISTE DES EQUIPEMENT");
                   painter.setPen(Qt::red);
                   painter.setFont(QFont("Time New Roman", 10));
                   painter.drawRect(100, 100, 9200, 2700); // dimension ta3 rectangle
                   painter.drawRect(100, 3000, 9200, 500);


                   painter.drawText(300,3300,"ID EQUIPEMENT");
                   painter.drawText(1800,3300,"TYPE");
                   painter.drawText(2800,3300,"ETAT");
                   painter.drawText(3500,3300,"PRIX");
                   painter.drawText(4000,3300,"NIVEAU REMPLISSAGE");
                   painter.drawText(6000,3300,"DATE ACQUISATION");
                   painter.drawText(8000,3300,"IDZ");





                   QImage image("C:/Users/GENERAL/Desktop/Gestion_equipements/Gestion_equipements/image/logo_esprit.png");
                   painter.drawImage(QRectF(200, 200, 2000, 2000), image);

                   QImage image1("C:/Users/GENERAL/Desktop/Gestion_equipements/Gestion_equipements/image/logo_rec.png");
                   painter.drawImage(QRectF(7000, 200, 2000, 2000), image1);

                   painter.drawRect(100, 3700, 9200, 9000);

                   QSqlQuery query;
                   query.prepare("select * from Equipement");
                   query.exec();
                   while (query.next())
                   {
                       painter.drawText(700, i, query.value(0).toString());
                       painter.drawText(1800, i, query.value(1).toString());
                       painter.drawText(2800, i, query.value(2).toString());
                       painter.drawText(3500, i, query.value(3).toString());
                       painter.drawText(4800, i, query.value(4).toString());
                       painter.drawText(6000, i, query.value(5).toString());
                       painter.drawText(8000, i, query.value(6).toString());

                       i = i + 350;
                   }

                   QMessageBox::information(this, QObject::tr("PDF Enregistré!"),
                       QObject::tr("PDF Enregistré!.\n" "Click Cancel to exit."), QMessageBox::Cancel);

}

void MainWindow::on_qrcodegen_clicked()
{
    QString value = ui->lineEdit_qrcode->text();

        QSqlQuery qry;
        qry.prepare("SELECT * FROM Equipement WHERE id_equipement = :id_equipement");
        qry.bindValue(":id_equipement", value);
        qry.exec();

        if (qry.next()) {
            // ID exists in the database
            QString id_equipement = qry.value(0).toString();
            QString type = qry.value(1).toString();
            QString etat = qry.value(2).toString();
            QString prix = qry.value(3).toString();
            QString niveau_remplissage = qry.value(4).toString();
            QString date_acquisation = qry.value(5).toString();
            QString idZ = qry.value(6).toString();








            QString text = "ID Equipement :" + id_equipement + "\n" + "Type :" + type + "\n" + "Etat :" + etat + "\n" +
                           "Prix :" + prix + "\n" + "Niveau Remplissage :" + niveau_remplissage + "\n" + "Date Acquisation :" + date_acquisation + "\n" + "Id Zone :" + idZ  ;

            // Create the QR Code object
            QrCode qr = QrCode::encodeText(text.toUtf8().data(), QrCode::Ecc::MEDIUM);

            qint32 sz = qr.getSize();
            QImage im(sz, sz, QImage::Format_RGB32);
            QRgb black = qRgb(191, 112, 105);
            QRgb white = qRgb(255, 255, 255);

            for (int y = 0; y < sz; y++) {
                for (int x = 0; x < sz; x++) {
                    im.setPixel(x, y, qr.getModule(x, y) ? black : white);
                }
            }

            ui->qrcodecommande->setPixmap(QPixmap::fromImage(im.scaled(200, 200, Qt::KeepAspectRatio, Qt::FastTransformation), Qt::MonoOnly));
        } else {
            // ID does not exist in the database
            QMessageBox::critical(nullptr, QObject::tr("ID Equipement introuvable"),
                QObject::tr("L'ID Equipement que vous avez saisi n'existe pas.\n"
                            "Click Cancel to exit."), QMessageBox::Cancel);
        }
}



void MainWindow::on_send_mail_2_clicked()
{
    Equipement c;

       smtp* ssmtp = new smtp("nouri.louay@esprit.tn", "azertyqwerty123", "smtp.gmail.com", 465);

               connect(ssmtp, SIGNAL(status(QString)), this, SLOT(mailSent(QString)));

               QString email=ui->client_email_to_send_2->text();

               QString b=ui->client_email_subject_2->text();

               QString ob=ui->client_email_text_2->toPlainText();

                if(email!="" && b!="" && ob!="" )
                   {
                                 if(c.isValidEmail(email))
                                 {
                                     ssmtp->sendMail("nouri.louay@esprit.tn", email , b,ob);
                                     QMessageBox::information(nullptr, QObject::tr("EMAIL"),
                                     QObject::tr("Email Envoyé avec succees.\n"
                                     "click Cancel to exit"),QMessageBox::Cancel);
                                 }
                                 else
                                 {
                                     QMessageBox::critical(nullptr, QObject::tr("EMAIL"),
                                     QObject::tr("Email is wrong in.\n"
                                     "click Cancel to exit."),QMessageBox::Cancel);
                                 }
                   }
                else
                   {
                           QMessageBox::critical(nullptr, QObject::tr("EMAIL"),
                           QObject::tr("something is empty.\n"
                           "click Cancel to exit."),QMessageBox::Cancel);
                   }
   }

